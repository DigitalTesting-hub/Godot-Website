<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Godot 3D MP LMS</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/lms.css">
    <link rel="stylesheet" href="css/admin.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="admin-page">
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">GODOT 3D MP - ADMIN</div>
                
                <!-- Desktop Navigation -->
                <div class="nav-links">
                    <a href="#dashboard">Dashboard</a>
                    <a href="#courses">Courses</a>
                    <a href="#students">Students</a>
                    <a href="#analytics">Analytics</a>
                    <a href="course.html">View Site</a>
                </div>
                
                <!-- Admin User Menu -->
                <div class="user-menu">
                    <span id="adminEmail" class="user-email"></span>
                    <button id="adminLogoutBtn" class="cta-button logout-btn">Logout</button>
                </div>
                
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" id="mobileMenuBtn">â˜°</button>
            </nav>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-header">
                <div class="mobile-menu-logo">GODOT 3D MP - ADMIN</div>
                <button class="mobile-close-btn" id="mobileCloseBtn">âœ•</button>
            </div>
            
            <div class="mobile-nav-links">
                <a href="#dashboard" onclick="closeMobileMenu()">Dashboard</a>
                <a href="#courses" onclick="closeMobileMenu()">Courses</a>
                <a href="#students" onclick="closeMobileMenu()">Students</a>
                <a href="#analytics" onclick="closeMobileMenu()">Analytics</a>
                <a href="course.html" onclick="closeMobileMenu()">View Site</a>
                
                <!-- Mobile Admin User Info -->
                <div class="mobile-user-menu">
                    <div class="mobile-user-email" id="mobileAdminEmail"></div>
                    <button class="mobile-logout-btn" id="mobileAdminLogoutBtn">Logout</button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
    </header>

    <!-- Admin Dashboard -->
    <section id="dashboard" class="admin-dashboard">
        <div class="container">
            <div class="admin-header">
                <h1>Admin Dashboard</h1>
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3>Total Students</h3>
                        <span id="totalStudents" class="stat-number">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Total Courses</h3>
                        <span id="totalCourses" class="stat-number">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Active Users</h3>
                        <span id="activeUsers" class="stat-number">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Revenue</h3>
                        <span id="totalRevenue" class="stat-number">$0</span>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-grid">
                    <button class="action-btn" onclick="showSection('courses')">
                        <span class="action-icon">ðŸ“š</span>
                        <span>Manage Courses</span>
                    </button>
                    <button class="action-btn" onclick="showSection('students')">
                        <span class="action-icon">ðŸ‘¥</span>
                        <span>Manage Students</span>
                    </button>
                    <button class="action-btn" onclick="showSection('analytics')">
                        <span class="action-icon">ðŸ“Š</span>
                        <span>View Analytics</span>
                    </button>
                    <button class="action-btn" onclick="openCourseModal()">
                        <span class="action-icon">âž•</span>
                        <span>Add New Course</span>
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <h2>Recent Activity</h2>
                <div id="recentActivityList" class="activity-list">
                    <!-- Activity items will be loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Courses Management -->
    <section id="courses" class="admin-section" style="display: none;">
        <div class="container">
            <div class="section-header">
                <h2>Course Management</h2>
                <button class="cta-button" onclick="openCourseModal()">+ Add New Course</button>
            </div>

            <div class="courses-list" id="adminCoursesList">
                <!-- Courses will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Students Management -->
    <section id="students" class="admin-section" style="display: none;">
        <div class="container">
            <div class="section-header">
                <h2>Student Management</h2>
                <div class="search-box">
                    <input type="text" id="studentSearch" placeholder="Search students...">
                </div>
            </div>

            <div class="students-list" id="studentsList">
                <!-- Students will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Analytics -->
    <section id="analytics" class="admin-section" style="display: none;">
        <div class="container">
            <div class="section-header">
                <h2>Analytics & Reports</h2>
            </div>

            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3>Course Completion Rates</h3>
                    <div id="completionChart" class="chart-placeholder">
                        Chart will be displayed here
                    </div>
                </div>
                <div class="analytics-card">
                    <h3>Student Progress</h3>
                    <div id="progressChart" class="chart-placeholder">
                        Chart will be displayed here
                    </div>
                </div>
                <div class="analytics-card">
                    <h3>Revenue Overview</h3>
                    <div id="revenueChart" class="chart-placeholder">
                        Chart will be displayed here
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modals -->
    
    <!-- Course Modal -->
    <div id="courseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="courseModalTitle">Add New Course</h3>
                <button class="close-btn" onclick="closeCourseModal()">âœ•</button>
            </div>
            <form id="courseForm" class="modal-form">
                <input type="hidden" id="courseId">
                
                <div class="form-group">
                    <label for="courseTitle">Course Title</label>
                    <input type="text" id="courseTitle" required>
                </div>
                
                <div class="form-group">
                    <label for="courseDescription">Description</label>
                    <textarea id="courseDescription" rows="4" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="courseTier">Required Tier</label>
                        <select id="courseTier" required>
                            <option value="free">Free</option>
                            <option value="basic">Basic</option>
                            <option value="pro">Pro</option>
                            <option value="premium">Premium</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="coursePrice">Price ($)</label>
                        <input type="number" id="coursePrice" step="0.01" min="0" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="courseActive" checked>
                        Course Active
                    </label>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeCourseModal()">Cancel</button>
                    <button type="submit" class="cta-button">Save Course</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Module Modal -->
    <div id="moduleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="moduleModalTitle">Add Module</h3>
                <button class="close-btn" onclick="closeModuleModal()">âœ•</button>
            </div>
            <form id="moduleForm" class="modal-form">
                <input type="hidden" id="moduleId">
                <input type="hidden" id="moduleCourseId">
                
                <div class="form-group">
                    <label for="moduleTitle">Module Title</label>
                    <input type="text" id="moduleTitle" required>
                </div>
                
                <div class="form-group">
                    <label for="moduleDescription">Description</label>
                    <textarea id="moduleDescription" rows="3" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="moduleOrder">Order</label>
                        <input type="number" id="moduleOrder" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="moduleDuration">Duration</label>
                        <input type="text" id="moduleDuration" placeholder="e.g., 15:30" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="moduleVideoUrl">Video URL</label>
                    <input type="url" id="moduleVideoUrl" placeholder="https://example.com/video.mp4">
                </div>
                
                <div class="form-group">
                    <label for="moduleTier">Required Tier</label>
                    <select id="moduleTier" required>
                        <option value="free">Free</option>
                        <option value="basic">Basic</option>
                        <option value="pro">Pro</option>
                        <option value="premium">Premium</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModuleModal()">Cancel</button>
                    <button type="submit" class="cta-button">Save Module</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Student Details Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Student Details</h3>
                <button class="close-btn" onclick="closeStudentModal()">âœ•</button>
            </div>
            <div id="studentDetails" class="student-details">
                <!-- Student details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
